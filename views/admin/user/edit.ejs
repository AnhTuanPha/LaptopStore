<% include ../layout/header.ejs %>
<!-- END TOPBAR -->
<!-- START CONTAINER -->
<div class="page-container row-fluid container-fluid">
    <!-- SIDEBAR - START -->
    <% include ../layout/menu.ejs %>
    <!--  SIDEBAR - END -->
    <!-- START CONTENT -->
    <section id="main-content" class=" ">
        <section class="wrapper main-wrapper row" style=''>
            <div class='col-xs-12'>
                <div class="page-title">
                    <div class="pull-left">
                        <h1 class="title">Detail User</h1>
                    </div>
                    <div class="pull-right hidden-xs">

                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="col-lg-12">
                <section class="box ">
                    <div class="content-body">
                        <div class="row">
                            <% if(response_message){ %>
                            <div class="alert alert-success"><%= response_message%></div>
                            <% } %>
                            <% if(errors) { %>
                            <div class="alert alert-danger">
                                <% errors.forEach(function(e){ %>
                                <%= e.msg %> <br />
                                <%});%>
                            </div>
                            <% };%>
                            <form action="" method="post" enctype="multipart/form-data">
                                <div class="col-xs-12 col-sm-9 col-md-8 padding-bottom-30">
                                    <div class="form-group">
                                        <label class="form-label" for="field-120334">FullName</label>
                                        <span class="desc"></span>
                                        <div class="controls">
                                            <input type="text" id="fullname" value="<%= user.fullname%>" class="form-control" name="fullname">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-9 col-md-8 padding-bottom-30">
                                    <div class="form-group">
                                        <label class="form-label" for="field-120334">Email</label>
                                        <span class="desc"></span>
                                        <div class="controls">
                                            <input type="text" id="email" value="<%= user.email%>" class="form-control" name="email">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-9 col-md-8 padding-bottom-30">
                                    <div class="form-group">
                                        <label class="form-label" for="field-120334">Password</label>
                                        <span class="desc"></span>
                                        <div class="controls">
                                            <input type="password" id="password" value="<%= user.password%>" class="form-control" name="password">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-9 col-md-8 padding-bottom-30">
                                    <div class="form-group">
                                        <label class="form-label" for="field-120334">Photo</label>
                                        <span class="desc"></span><br />
                                        <img src="upload/<%= user.photo%>" width="200px">
                                        <div class="controls">
                                            <input type="file" id="hinh" value="aaaa" class="form-control" name="hinh">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-9 col-md-8 padding-bottom-30">
                                    <div class="form-group">
                                        <label class="form-label" for="field-120334">Role</label>
                                        <span class="desc"></span><br />
                                        <div class="controls">
                                            <% roles.forEach(function(r){ %>
                                                <div>
                                                    <label for="<%= r %>" onclick="onClickRole()">
                                                        <% if (user.roles.indexOf(r) === -1) { %>
                                                            <input type="checkbox" class="ckbRole"
                                                                id="<%= r %>" name="<%= r %>" value="<%= r %>">
                                                        <% } else { %>
                                                            <input type="checkbox" class="ckbRole"
                                                                id="<%= r %>" name="<%= r %>" value="<%= r %>" checked >
                                                        <% } %>
                                                        <%= r %>
                                                    </label>
                                                </div>
                                            <%});%>
                                            <input type="hidden" id="role" class="form-control txtRole" name="role">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-9 col-md-8 padding-bottom-30">
                                    <div class="text-left">
                                        <button type="submit" class="btn btn-primary">Save</button>
                                        <button type="button" class="btn">Cancel</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>
            </div>
        </section>
    </section>
    <!-- END CONTENT -->
    <div class="chatapi-windows "></div>
</div>

<script type="text/javascript">
    function onClickRole() {
        var i = 0;
        var str = '';

        $('.ckbRole').each((index, e) => {
            var control = $(e);

            if (control.is(':checked')) {
                str += '|' + control.val();
                i += 1;
            }
        });

        if (i > 0) {
            $('.txtRole').val(str.substring(1));
        }
        else {
            $('.txtxRole').val('');
        }
    }
</script>

<% include ../layout/footer.ejs %>
